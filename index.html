<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BillSplit - Smart Expense Sharing</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;800&display=swap" rel="stylesheet">
</head>

<body>
    <div class="container">
        <header>
            <div>
                <h1>BillSplit</h1>
                <p class="subtitle">Effortlessly split bills with friends</p>
            </div>
            <div style="display: flex; gap: 0.5rem;">
                <select id="currency-select" onchange="updateCurrency()" style="width: auto; padding: 0.25rem 0.5rem;"
                    aria-label="Select Currency">
                    <option value="$">$ (USD)</option>
                    <option value="â‚¬">â‚¬ (EUR)</option>
                    <option value="Â£">Â£ (GBP)</option>
                    <option value="â‚¹">â‚¹ (INR)</option>
                    <option value="Â¥">Â¥ (JPY)</option>
                </select>
                <button class="icon-btn" onclick="toggleTheme()" title="Toggle Theme">
                    ðŸŒ—
                </button>
            </div>
        </header>

        <!-- Step 1: Add Friends -->
        <div class="card" id="friends-section" style="animation-delay: 0.1s">
            <div class="section-header">
                <h2>ðŸ‘¥ Friends</h2>
                <span class="tag" id="friend-count">0 friends</span>
            </div>
            <div class="input-group">
                <input type="text" id="friend-name" placeholder="Enter friend's name"
                    onkeypress="handleEnter(event, addFriend)">
                <button onclick="addFriend()">Add</button>
            </div>
            <div id="friends-list" class="list-container">
                <!-- Friends will appear here -->
            </div>
        </div>

        <!-- Step 2: Add Items -->
        <div class="card" id="items-section" style="animation-delay: 0.2s">
            <div class="section-header">
                <h2>ðŸ§¾ Items</h2>
                <span class="tag" id="item-count">0 items</span>
            </div>

            <div class="input-group">
                <input type="text" id="item-name" placeholder="Item name (e.g., Pizza)" style="flex: 2">
                <input type="number" id="item-price" placeholder="Price" step="0.01" style="flex: 1">
            </div>

            <div style="margin-bottom: 1rem;">
                <p class="subtitle" style="font-size: 0.9rem; margin-bottom: 0.5rem;">Shared by:</p>
                <div id="shared-by-grid" class="checkbox-grid">
                    <!-- Friend checkboxes will appear here -->
                    <p class="subtitle" style="font-style: italic;">Add friends first...</p>
                </div>
            </div>

            <div style="display: flex; gap: 0.5rem;">
                <button id="add-item-btn" onclick="addItem()" style="flex: 1">Add Item</button>
                <button id="cancel-edit-btn" class="secondary hidden" onclick="cancelEdit()"
                    style="flex: 1">Cancel</button>
            </div>

            <div id="items-list" class="list-container mt-4">
                <!-- Items will appear here -->
            </div>
        </div>

        <!-- Step 3: Settlement -->
        <div class="card" id="settlement-section" style="animation-delay: 0.3s">
            <div class="section-header">
                <h2>ðŸ’° Settlement</h2>
            </div>

            <div style="margin-bottom: 1rem;">
                <div style="display: flex; gap: 1rem; margin-bottom: 1rem;">
                    <label class="radio-card" style="flex: 1;">
                        <input type="radio" name="payer-mode" value="single" checked onchange="togglePayerMode()">
                        Single Payer
                    </label>
                    <label class="radio-card" style="flex: 1;">
                        <input type="radio" name="payer-mode" value="multiple" onchange="togglePayerMode()">
                        Multiple Payers
                    </label>
                </div>

                <div id="single-payer-container">
                    <div class="input-group" style="align-items: center;">
                        <label for="payer-select" style="white-space: nowrap;">Paid by:</label>
                        <select id="payer-select" onchange="calculateSplits()">
                            <option value="">Select Payer</option>
                        </select>
                    </div>
                </div>

                <div id="multiple-payer-container" class="hidden">
                    <p class="subtitle" style="margin-bottom: 0.5rem;">Enter amount paid by each person:</p>
                    <div id="payer-inputs" class="list-container">
                        <!-- Inputs generated here -->
                    </div>
                    <div class="result-row mt-4" style="border-top: 1px solid var(--border); padding-top: 0.5rem;">
                        <span>Total Paid:</span>
                        <span id="total-paid-display" style="font-weight: 600;">$0.00</span>
                    </div>
                    <div id="payment-status" class="subtitle text-right" style="font-size: 0.85rem;"></div>
                </div>
            </div>

            <div id="results-area" class="hidden">
                <div class="result-group">
                    <div class="result-row total-row">
                        <span>Total Bill</span>
                        <span id="total-amount">$0.00</span>
                    </div>
                </div>

                <div class="result-group">
                    <h3>Individual Shares</h3>
                    <div id="individual-shares" class="list-container mt-4"></div>
                </div>

                <div class="result-group">
                    <h3>Who Owes Who</h3>
                    <div id="debts-list" class="list-container mt-4"></div>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>

</html>